<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8"/>
  <title>Injoy</title>

  <base href="/"/>

  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <meta name="format-detection" content="telephone=no"/>
  <meta name="msapplication-tap-highlight" content="no"/>
  <link rel="icon" type="image/png" href="assets/icon/favicon.png"/>

  <!-- add to homescreen for ios -->
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#1976d2">
</head>

<body>
  <app-root></app-root>
  <noscript>Please enable JavaScript to continue using this application.</noscript>
  <script>

    let CACHE_NAME = 'sw-v1'
    self.addEventListener('install', (event) => {
      event.waitUntil(
        caches.open(CACHE_NAME)
        .then(cache => cache.addAll('./404.html'))
      )
    })
    self.addEventListener('fetch', (event) => {
      if (event.request.method === 'GET') {
        event.respondWith(
          caches.match(event.request)
          .then((cached) => {
            var networked = fetch(event.request)
              .then((response) => {
                let cacheCopy = response.clone()
                caches.open(CACHE_NAME)
                  .then(cache => cache.put(event.request, cacheCopy))
                return response;
              })
              .catch(() => caches.match(offlinePage));
            return cached || networked;
          })
        )
      }
      return;
    });
  </script>
</body>

</html>
